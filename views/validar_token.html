<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validar Token - G3FIBRA</title>
    <!-- Link para o CSS -->
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <!-- Cabeçalho com a logo -->
    <header style="background-color: #1eaa28; padding: 10px;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <img src="/images/logo_g3fibra.png" alt="Logo G3FIBRA" style="width: 150px;">
            <nav>
                <a href="/logout" style="color: white; text-decoration: none;">Sair</a>
            </nav>
        </div>
    </header>

    <div class="container" style="margin: 20px auto; max-width: 600px;">
        <h2>Validar Token</h2>
        <form method="POST" action="/validar_token">
            <label for="token">Insira o token:</label>
            <input type="text" id="token" name="token" required>
            <button type="submit">Validar</button>
        </form>

        <!-- Área para exibir a mensagem de validação -->
        <div id="mensagem-validacao" style="margin-top: 20px;">
            <!-- Mensagem será inserida aqui pelo servidor -->
        </div>

        <!-- Botão "INÍCIO" será exibido aqui após a validação -->
        <div id="botao-inicio" style="margin-top: 20px;">
            <!-- Botão será inserido aqui pelo servidor -->
        </div>
    </div>

    <!-- Script para manipular a resposta do servidor -->
    <script>
        // Captura os dados enviados pelo servidor após a validação
        document.addEventListener("DOMContentLoaded", () => {
            const urlParams = new URLSearchParams(window.location.search);
            const mensagem = urlParams.get('mensagem');
            const tipoUsuario = urlParams.get('tipo_usuario');

            const mensagemDiv = document.getElementById('mensagem-validacao');
            const botaoInicioDiv = document.getElementById('botao-inicio');

            if (mensagem) {
                // Exibe a mensagem de validação
                mensagemDiv.innerHTML = `<p>${mensagem}</p>`;
            }

            if (tipoUsuario) {
                // Determina o botão "INÍCIO" com base no tipo de usuário
                const botaoInicio = tipoUsuario === 'administrador'
                    ? '<a href="/painel_administrador"><button>INÍCIO</button></a>'
                    : '<a href="/painel_colaborador"><button>INÍCIO</button></a>';

                botaoInicioDiv.innerHTML = botaoInicio;
            }
        });
    </script>
</body>
</html>